<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
		"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.thehandsome.app.dao.StockDAO">

	<parameterMap type="java.util.HashMap" id="stockMap">
		<parameter property="product_id" jdbcType="VARCHAR" mode="IN" />
		<parameter property="department_id" jdbcType="INTEGER"	mode="IN" />
	</parameterMap>
	<select id="getStock" parameterMap="stockMap" resultType="StockDTO">
		<![CDATA[
		SELECT stock.id, stock.branch_id, stock.product_id, stock.sizelabel, stock.color, stock.quantity
		FROM Stock, Product, Branch
		WHERE stock.product_id like #{product_id} AND product.brand_id = branch.brand_id AND branch.department_id = #{department_id} AND Stock.branch_id = branch.id
		AND Rownum = 1
		]]>
	</select>
</mapper>