<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
		"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.thehandsome.app.dao.CartDAO">

	<select id="getCartList" parameterType="String"
		resultType="CartDTO">
		<![CDATA[
		SELECT Cart.userId, Cart.productId, Cart.quantity, Cart.sizelabel, Cart.color, ProductColor.imagepath, Brand.name as brandName, Product.title, Product.price, Product.sex, Product.mainCategoryid, Product.subCategoryid
		FROM Cart, ProductColor, Product, Brand
		WHERE cart.userId = #{usetId} and cart.productId like Product.id and product.brandId = brand.id and cart.productId like ProductColor.productId and cart.color=productColor.color
		]]>
	</select>

	<insert id="insertCart" parameterType="CartDTO">
		INSERT into
		Cart(usetId, productId, quantity, color, sizeLabel)
		VALUES(#{userId}, #{productId}, #{quantity}, #{color}, #{size})
	</insert>

	<delete id="deleteCart" parameterType="CartDTO">
		DELETE FROM Cart
		WHERE userId = #{userId} and productId = #{productId}
	</delete>

	<update id="updateCart" parameterType="CartDTO">
		UPDATE Cart SET
		color = #{color}, sizeLabel = #{sizeLabel}
		where userId = #{userId} and productId = #{productId}
	</update>
	
	<update id="updateQuantity" parameterType="CartDTO">
		UPDATE Cart SET
		quantity = #{quantity}
		where userId = #{userId} and productId = #{productId}
	</update>
</mapper>