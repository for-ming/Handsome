create user handsome identified by handsome default tablespace users temporary tablespace temp;
alter user handsome quota unlimited on users;
grant connect, resource to handsome;



drop table productcolor purge;
drop table productsize purge;
drop table product PURGE;

-- 생성자 Oracle SQL Developer Data Modeler 20.4.0.374.0801
--   위치:        2021-07-05 02:37:21 KST
--   사이트:      Oracle Database 11g
--   유형:      Oracle Database 11g



-- predefined type, no DDL - MDSYS.SDO_GEOMETRY

-- predefined type, no DDL - XMLTYPE

CREATE TABLE product (
    id              VARCHAR2(255) NOT NULL,
    brandId         NUMBER(10) NOT NULL,
    sex             VARCHAR2(255) NOT NULL,
    maincategoryid  NUMBER(10) NOT NULL,
    subcategoryid   NUMBER(10) NOT NULL,
    title           VARCHAR2(255) NOT NULL,
    price           NUMBER(20) NOT NULL,
    longdetail      CLOB NOT NULL,
    shortdetail     CLOB NOT NULL
);

ALTER TABLE product ADD CONSTRAINT product_pk PRIMARY KEY ( id );

CREATE TABLE productcolor (
    color      VARCHAR2(255) NOT NULL,
    imagepath  VARCHAR2(255) NOT NULL,
    productId  VARCHAR2(255) NOT NULL
);

ALTER TABLE productcolor ADD CONSTRAINT productcolor_pk PRIMARY KEY ( productId,
                                                                      color );

CREATE TABLE productsize (
    "size"     VARCHAR2(255) NOT NULL,
    productId  VARCHAR2(255) NOT NULL
);

ALTER TABLE productsize ADD CONSTRAINT productsize_pk PRIMARY KEY ( productId,
                                                                    "size" );

ALTER TABLE productcolor
    ADD CONSTRAINT productcolor_product_fk FOREIGN KEY ( productId )
        REFERENCES product ( id );

ALTER TABLE productsize
    ADD CONSTRAINT productsize_product_fk FOREIGN KEY ( productId )
        REFERENCES product ( id );
